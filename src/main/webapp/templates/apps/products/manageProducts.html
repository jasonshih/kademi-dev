<html xmlns="http://www.w3.org/1999/xhtml">    <head>        <title>Manage Products</title>        <style>            .upload-results {                display: none;            }        </style>        <script type="text/javascript" src="manageProducts.js?v0001">//</script>    </head>    <body class="">        <p>            <div>                <div class="btn-group" role="group">                    <a href="/product-images/" class="btn btn-sm btn-info" role="button"><i class="fa fa-picture-o"></i> Product images</a>                    <button id="newProduct" type="button" class="btn btn-sm btn-success newProduct" data-toggle="modal" data-target="#addProductModal"><i class="fa fa-plus"></i> Add New Product</button>                    <button type="button" class="btn btn-sm btn-success dropdown-toggle" data-toggle="dropdown" aria-expanded="false">                        <span class="caret"></span>                    </button>                    <ul class="dropdown-menu pull-right" role="menu">                        <li><a href="#" title="Upload products CSV" id="uploadProductsCsv" data-toggle="modal" data-target="#modal-upload-csv"><i class="glyphicon glyphicon-upload"></i> Upload CSV</a></li>                        <li><a id="btn-export-products" href="products.csv" title="Export products CSV"><i class="glyphicon glyphicon-download"></i> Export CSV</a></li>                        <li><a href="/tableUploaders/productsUploader" ><i class="glyphicon glyphicon-upload"></i> Import Products</a></li>                        <li class="divider"></li>                        <li><a href="#" title="Upload variants CSV" id="uploadVariantsCsv" data-toggle="modal" data-target="#modal-upload-variants-csv"><i class="glyphicon glyphicon-upload"></i> Upload Variants CSV</a></li>                        <li><a href="variants.csv" title="Export product variants CSV"><i class="glyphicon glyphicon-download"></i> Export Variants CSV</a></li>                    </ul>                </div>                <div class="btn-group pull-right" role="group">                    <a href="#" class="btn btn-danger btn-delete-products" role="button"><i class="fa fa-times"></i> Delete</a>                    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-expanded="false">                        <span class="caret"></span>                    </button>                    <ul class="dropdown-menu pull-right" role="menu">                        <li>                            <a href="#" title="Bulk delete" id="bulkDeleteProducts" data-toggle="modal" data-target="#modalBulkDelete"><i class="glyphicon glyphicon-remove-circle"></i> Bulk delete...</a>                        </li>                    </ul>                </div>            </div>            <br/>            <div class="btn-group row">                <div class="col-md-6">                    <div class="input-group">                        <label for="data-query" class="input-group-addon">Search</label> <input                            type="text" id="data-query" placeholder="Search" value="$!request.params.dataQuery"                            class="form-control" />                    </div>                </div>                #if ($page.adminLogged)                <div class="col-md-6">                    <div class="input-group">                        <label for="supplier" class="input-group-addon">Supplier</label>                        <select name="supplier" id="supplier" class="form-control">                            $formatter.option("", "[ Select a supplier ]", "")                            $formatter.option($page.organisation.orgId, $page.organisation.formattedName, $page.product.supplier.orgId)                            #foreach($childOrg in $page.supplierOrgs)                            $formatter.option($childOrg.orgId, $childOrg.formattedName, $page.product.supplier.orgId)                            #end                        </select>                    </div>                </div>                #end            </div>        </p>        <div class="panel panel-default">            <div id="productsTableContainer" class="panel-body">                <div class="table-responsive">                    <table class="table table-striped table-hover pagination-container" style="table-layout: fixed">                        <colgroup>                            <col width="100px" />                            <col width="10%" />                            <col width="35%" />                            <col width="15%" />                            <col width="10%" />                            <col width="10%"/>                            <col width="50px"/>                            <col width="50px"/>                        </colgroup>                        <thead>                            <tr>                                <th></th>                                <th><a class="sort-field" id="name" href="#">Code</a></th>                                <th><a class="sort-field" id="title" href="#">Title</a></th>                                <th><a class="sort-field" id="supplier" href="#">Supplier</a></th>                                <th>No. variants</th>                                <th><a class="sort-field" id="baseCost" href="#">Base Cost</a></th>                                <th><input type="checkbox" class="check-all"/></th>                            </tr>                        </thead>                        <tbody id="productTableBody" class="pagination-results">                            #foreach($product in $page.paginator.records)                            <tr>                                <td>                                    #if( $product.imageHrefs.size() > 0 )                                    <a href='$product.imageHrefs.get(0)' class='product-image'>                                        <span class='fa fa-picture-o'></span>                                    </a>                                    #end                                </td>                                <td><a href="$product.name">$formatter.firstNotNull($product.product.name, $product.name)</a></td>                                <td>$product.title</td>                                <td>                                    #if( $product.supplier )                                    <a href="/organisations/$product.supplier.id/edit">$!product.supplier.formattedName</a>                                    #end                                </td>                                <td>$product.numVariants</td>                                <td>$!product.baseCost</td>                                <td><input type="checkbox" data-productname="$product.product.id" class="product-check"/></td>                                <td>                                    <a href="$product.product.id" class="btn btn-info">                                        <i class="fa fa-pencil"></i>                                    </a>                                </td>                            </tr>                            #end                        </tbody>                        <tfoot id="pointsFooter">                            <tr>                                <td colspan="6">                                    $!page.paginator.html                                </td>                            </tr>                        </tfoot>                    </table>                </div>            </div>        </div>        <div id="addProductModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                        <h4 class="modal-title">Product Details</h4>                    </div>                    <form action="." method="POST" class="form-horizontal createProduct">                        <div class="modal-body">                            <div class="form-message alert alert-danger" style="display: none;"></div>                            <input type="hidden" name="action" value="create"/>                            <div class="form-group">                                <label class="col-md-3 control-label" for="name">Name/Code</label>                                <div class="col-md-8">                                    <input class="form-control required" type="text" id="name" name="name" maxlength="30" placeholder="Produce code, Eg MEK-123"  />                                </div>                            </div>                            <div class="form-group">                                <label class="col-md-3 control-label" for="title">Title</label>                                <div class="col-md-8">                                    <input class="form-control required" id="title" type="text" name="title" maxlength="250" placeholder="Product title" />                                </div>                            </div>                            <div class="form-group">                                <label class="col-md-3 control-label" for="baseCost">Base cost</label>                                <div class="col-md-8">                                    <input class="form-control numeric" id="baseCost" type="text" name="baseCost" maxlength="20" placeholder="Base cost of the product" />                                </div>                            </div>                            #if (!$page.adminLogged)                            <div class="form-group">                                <label class="col-md-3 control-label" for="supplier">Organisation</label>                                <div class="col-md-8">                                    <select class="form-control required" name="supplier">                                        #foreach($childOrg in $page.supplierOrgs)                                        $formatter.option($childOrg.orgId, $childOrg.formattedName, $page.product.supplier.orgId)                                        #end                                    </select>                                </div>                            </div>                            #end                        </div>                        <div class="modal-footer">                            <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Close</button>                            <button class="btn btn-sm btn-primary" type="submit">Create product</button>                        </div>                    </form>                </div>            </div>        </div>        <div id="modal-upload-csv" class="modal fade" aria-hidden="true" tabindex="-1">            <div class="modal-dialog modal-lg">                <div class="modal-content">                    <div class="modal-header">                        <button aria-hidden="true" data-dismiss="modal" class="close" type="button">&times;</button>                        <h4 class="modal-title">Upload Product CSV</h4>                    </div>                    <div class="modal-body">                        <div class="upload">                            <div class="btn-upload" id='do-upload-csv'></div>                            <br />                            <!--                            <div class="allow-inserts">                                <input type="checkbox" id="allow-inserts" /> <label for="allow-inserts">Allow inserts</label>                            </div>                            -->                        </div>                        <br />                        <div class="upload-results">                            <p>                                <strong>No. inserted:</strong>                                <span class="badge badge-success num-inserted">-</span>                                <strong>No. updated:</strong>                                <span class="badge badge-success num-updated">-</span>                                <strong>Unmatched rows:</strong>                                <span class="badge badge-danger num-unmatched">-</span>                            </p>                            <div class="table-responsive">                                <table class="table table-striped table-hover table-condensed">                                    <tbody>                                        <tr>                                            <td></td>                                        </tr>                                    </tbody>                                </table>                            </div>                        </div>                    </div>                    <div class="modal-footer">                        <button class="btn btn-sm btn-default" data-dismiss="modal" type="button">Close</button>                    </div>                </div>            </div>        </div>        <div id="modal-upload-variants-csv" class="modal fade" aria-hidden="true" tabindex="-1">            <div class="modal-dialog modal-lg">                <div class="modal-content">                    <div class="modal-header">                        <button aria-hidden="true" data-dismiss="modal" class="close" type="button">&times;</button>                        <h4 class="modal-title">Upload Product Variants CSV</h4>                    </div>                    <div class="modal-body">                        <div class="upload">                            <div class="btn-upload" id='do-upload-variants-csv'></div>                            <br />                        </div>                        <br />                        <div class="upload-results">                            <p>                                <strong>No. inserted:</strong>                                <span class="badge badge-success num-inserted">-</span>                                <strong>No. updated:</strong>                                <span class="badge badge-success num-updated">-</span>                                <strong>Unmatched rows:</strong>                                <span class="badge badge-danger num-unmatched">-</span>                            </p>                            <div class="table-responsive">                                <table class="table table-striped table-hover table-condensed">                                    <tbody>                                        <tr>                                            <td></td>                                        </tr>                                    </tbody>                                </table>                            </div>                        </div>                    </div>                    <div class="modal-footer">                        <button class="btn btn-sm btn-default" data-dismiss="modal" type="button">Close</button>                    </div>                </div>            </div>        </div>        <div id="modalBulkDelete" class="modal fade" aria-hidden="true" tabindex="-1">            <div class="modal-dialog modal-lg">                <div class="modal-content">                    <div class="modal-header">                        <button aria-hidden="true" data-dismiss="modal" class="close" type="button">&times;</button>                        <h4 class="modal-title">Bulk delete products</h4>                    </div>                    <form action="$page.href" method="POST">                        <div class="modal-body">                            <p>Enter a list of product codes/SKU's below. These can be seperated by commas, semi-colons or new lines</p>                            <div class="form-message alert alert-danger" style="display: none;"></div>                            <textarea name="deleteBulkProducts" class="form-control" style='height: 400px'></textarea>                        </div>                        <div class="modal-footer">                            <button class="btn btn-sm btn-default" data-dismiss="modal" type="button">Close</button>                            <button class="btn btn-danger" type="submit">Delete products</button>                        </div>                    </form>                </div>            </div>        </div>        <script type="text/javascript" src="/static/js/jquery.milton-upload.js"></script>    </body></html>