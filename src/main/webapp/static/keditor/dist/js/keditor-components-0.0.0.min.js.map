{"version":3,"sources":["keditor-components-0.0.0.js"],"names":["$","KEditor","keditor","flog","log","components","settingEnabled","init","contentArea","container","component","options","id","generateId","componentContent","children","find","attr","panels","each","index","item","p","itemId","panelCollapseId","title","html","indexOf","collapse","removeClass","prop","on","e","onComponentChanged","call","onContainerChanged","onContentChanged","editor","ckeditor","ckeditorOptions","onComponentReady","document","off","preventDefault","confirm","panelsCount","length","this","parents","remove","Msg","error","clone","first","append","getContent","h","parent","replaceWith","addClass","destroy","CKEDITOR","instances","jQuery","img","componentId","hasClass","wrap","src","width","autostart","instance","getScriptOnce","jwplayer","key","buildJWAudioPlayerPreview","settingTitle","initSettingForm","form","showSettingForm","btnAudioFileInput","mselect","contentTypes","bs3Modal","pagePath","window","location","pathname","replace","onSelectFile","url","refreshAudioPlayerPreview","autoplayToggle","checked","audioWidth","val","value","resizeAudioPlayerPreview","playerInstance","setup","file","height","flashplayer","html5player","primary","onReady","load","play","resize","carousel","basePath","substr","lastIndexOf","carouselAddImage","carouselImageWrap","self","relUrl","type","hash","addImageToList","addImageToCarousel","getSettingComponent","sortable","handle","items","axis","tolerance","sort","update","rearrangeItems","body","btn","closest","siblings","refreshCarousel","comp","isWrap","pause","interval","cls","carouselImageItem","script","removeAttr","place","maptype","trigger","apiKey","mapjs","google","maps","places","not","data","event","initAutocomplete","input","i","setInterval","clearInterval","keyCode","iframe","alert","btn169","btn43","ratio169","ratio43","firstLoad","googleMapInitialized","setTimeout","mapdiv","map","Map","zoom","mapTypeId","searchBox","SearchBox","addListener","setBounds","getBounds","markers","getPlaces","forEach","marker","setMap","bounds","LatLngBounds","geometry","console","icon","size","Size","origin","Point","anchor","scaledSize","push","Marker","name","position","viewport","union","extend","fitBounds","initKeditorMapSetting","getData","css","buttonColorPicker","initColorPicker","color","paddingSettings","paddingValue","paddingProp","trim","isNaN","marginSettings","vectorMap","backgroundColor","zoomButtons","focusOn","x","y","scale","regionStyle","initial","fill","hover","onRegionTipShow","el","code","updateSize","arr","insertBefore","insertAfter","currentState","defaultState","txtLink","link","pattern","RegExp","span","next","formGroup","test","hide","show","cbbTarget","chkLinkable","is","unwrap","photoEdit","relativeUrl","fileType","inputAlign","panel","inputVAlign","inputResponsive","cbbStyle","inputWidth","inputHeight","newWidth","newHeight","Math","round","ratio","a","algin","valign","disableAutoInline","dtd","$removeEmpty","ckeditorPlace","contentHtml","componentTextContent","ajax","dataType","success","resp","target","imageUrl","host","colorPicker","txt","styleName","get","style","marginValue","maxHeight","maxWidth","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","colorpicker","wrapper","buildJWVideoPlayerPreview","selectPicker","selectpicker","borderStyle","txtBorderWidth","borderWidth","previewer","format","align","colorSelectors","transparent","colorHex","toHex","borderColor","btnVideoFileInput","refreshVideoPlayerPreview","loopToggle","showcontrolsToggle","isBorderEnabled","chkBorder","filter","jquery","repeat","aspectratio","controls","posterHref","androidhls","playlist","image","sources","btnEdit","inputData","prompt","vimeoRegex","match","chkAutoplay","embedItem","currentUrl","newUrl","youtubeRegex"],"mappings":"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","file":"keditor-components-0.0.0.min.js","sourcesContent":["/**\r\n * KEditor Jumbotron Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['accordion'] = {\r\n        settingEnabled: false,\r\n\r\n        init: function (contentArea, container, component, keditor) {\r\n            var options = keditor.options;\r\n            var id = keditor.generateId('accordion');\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.accordionWrap .panel-group').attr('id', id);\r\n            componentContent.find('.accordionWrap a[data-toggle]').attr('data-parent', '#' + id);\r\n\r\n\r\n            var panels = componentContent.find('.panel');\r\n            panels.each(function (index, item) {\r\n                var p = $(item);\r\n                var itemId = keditor.generateId('heading' + index);\r\n                var panelCollapseId = keditor.generateId('collapse' + index);\r\n                p.find('.panel-heading').attr('id', itemId);\r\n                p.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\r\n                var title = p.find('a[data-toggle]').html();\r\n                if (title.indexOf('<div>') === -1) {\r\n                    p.find('a[data-toggle]').attr('href', '#' + panelCollapseId).html('<div>' + title + '</div>');\r\n                }\r\n            });\r\n\r\n            componentContent.find('.accordionWrap .panel-collapse').collapse('show');\r\n            componentContent.find('.panel-footer, .btnAddAccordionItem').removeClass('hide');\r\n            componentContent.find('.panel-title a div').prop('contenteditable', true);\r\n            componentContent.find('.panel-collapse .panel-body').prop('contenteditable', true);\r\n\r\n            componentContent.find('.panel-title a div, .panel-collapse .panel-body').on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(contentArea, e, component);\r\n                }\r\n\r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(contentArea, e, container);\r\n                }\r\n\r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(contentArea, e);\r\n                }\r\n            });\r\n\r\n            var editor = componentContent.find('.panel-title a div, .panel-collapse .panel-body').ckeditor(options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n\r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n\r\n            $(document).off('click', '.btnDeleteAccordionItem').on('click', '.btnDeleteAccordionItem', function (e) {\r\n                e.preventDefault();\r\n\r\n                if (confirm('Are you sure you want to delete this item?')) {\r\n                    var panelsCount = componentContent.find('.panel').length;\r\n                    if (panelsCount > 1) {\r\n                        $(this).parents('.panel').remove();\r\n                    } else {\r\n                        Msg.error('You cant delete the last item');\r\n                    }\r\n                }\r\n            });\r\n\r\n            $(document).off('click', '.btnAddAccordionItem').on('click', '.btnAddAccordionItem', function (e) {\r\n                e.preventDefault();\r\n                var clone = componentContent.find('.panel').first().clone();\r\n                var itemId = keditor.generateId('heading');\r\n                var panelCollapseId = keditor.generateId('collapse');\r\n                clone.find('.panel-heading').attr('id', itemId);\r\n                clone.find('.panel-collapse').attr('aria-labelledby', itemId).attr('id', panelCollapseId);\r\n                clone.find('a[data-toggle]').attr('href', '#' + panelCollapseId);\r\n                componentContent.find('.accordionWrap .panel-group').append(clone);\r\n                var editor = clone.find('.panel-title a div, .panel-collapse .panel-body').ckeditor(options.ckeditorOptions).editor;\r\n                editor.on('instanceReady', function () {\r\n                    flog('CKEditor is ready', component);\r\n\r\n                    if (typeof options.onComponentReady === 'function') {\r\n                        options.onComponentReady.call(contentArea, component, editor);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        getContent: function (component, keditor) {\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.panel-title a div').each(function () {\r\n                var h = $(this).html();\r\n                $(this).parent('a').html(h);\r\n            });\r\n            componentContent.find('.panel-collapse .panel-body').each(function () {\r\n                var h = $(this).html();\r\n                $(this).replaceWith('<div class=\"panel-body\">' + h + '</div>');\r\n            });\r\n            componentContent.find('.panel-footer, .btnAddAccordionItem').addClass('hide');\r\n            return componentContent.html();\r\n        },\r\n\r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n\r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n\r\n/**\r\n * KEditor Audio Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['audio'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"audio\" component', component);\r\n\r\n            this.component = component;\r\n            var img = component.find('img[data-src]');\r\n            var componentId = '';\r\n            if (!img.attr('id')) {\r\n                componentId = keditor.generateId('component-audio');\r\n                img.attr('id', componentId);\r\n            } else {\r\n                componentId = img.attr('id');\r\n            }\r\n            if (!img.parent().hasClass('audio-wrapper')) {\r\n                img.wrap('<div class=\"audio-wrapper\"></div>');\r\n            }\r\n            this.src = img.attr('data-src');\r\n            this.width = img.attr('data-width');\r\n            this.autostart = img.attr('data-autostart') === 'true';\r\n            var instance = this;\r\n            $.getScriptOnce('/static/jwplayer/6.10/jwplayer.js', function () {\r\n                jwplayer.key = 'cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=';\r\n                instance.buildJWAudioPlayerPreview(componentId);\r\n            });\r\n\r\n        },\r\n\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"audio\" component', component);\r\n\r\n            var img = component.find('img[data-src]');\r\n            var componentId = img.attr('id');\r\n\r\n            var html = '<img data-componentId=\"' + componentId + '\" src=\"/theme/apps/content/preview/audio.png\" data-autostart=\"' + this.autostart + '\" data-width=\"' + this.width + '\" data-src=\"' + this.src + '\" data-kaudio=\"' + this.src + '\" />';\r\n            return html;\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Audio settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"audio\" settings', form);\r\n\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '<div class=\"form-group\">' +\r\n                '<label for=\"audioFileInput\" class=\"col-sm-12\">Audio file</label>' +\r\n                '<div class=\"col-sm-12\">' +\r\n                '<div class=\"audio-toolbar\">' +\r\n                '<a href=\"#\" class=\"btn-audioFileInput btn btn-sm btn-primary\"><i class=\"fa fa-upload\"></i></a>' +\r\n                '<input id=\"audioFileInput\" type=\"file\" style=\"display: none\">' +\r\n                '</div>' +\r\n                '</div>' +\r\n                '</div>' +\r\n                '<div class=\"form-group\">' +\r\n                '<label for=\"audio-autoplay\" class=\"col-sm-12\">Autoplay</label>' +\r\n                '<div class=\"col-sm-12\">' +\r\n                '<input type=\"checkbox\" id=\"audio-autoplay\" />' +\r\n                '</div>' +\r\n                '</div>' +\r\n                '<div class=\"form-group\">' +\r\n                '<label for=\"audio-width\" class=\"col-sm-12\">Width (px)</label>' +\r\n                '<div class=\"col-sm-12\">' +\r\n                '<input type=\"number\" id=\"audio-width\" min=\"200\" max=\"500\" class=\"form-control\" value=\"300\" />' +\r\n                '</div>' +\r\n                '</div>' +\r\n                '</form>'\r\n            );\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"audio\" component', form, component);\r\n\r\n            var instance = this;\r\n            var btnAudioFileInput = form.find('.btn-audioFileInput');\r\n            btnAudioFileInput.mselect({\r\n                contentTypes: ['audio'],\r\n                bs3Modal: true,\r\n                pagePath: window.location.pathname.replace('contenteditor', ''),\r\n                onSelectFile: function (url) {\r\n                    instance.src = url;\r\n                    instance.refreshAudioPlayerPreview();\r\n                }\r\n            });\r\n\r\n            var img = component.find('img[data-src]');\r\n            var componentId = img.attr('id');\r\n\r\n            var autoplayToggle = form.find('#audio-autoplay');\r\n            if (this.autostart) {\r\n                autoplayToggle.prop('checked', true);\r\n            }\r\n            autoplayToggle.on('click', function (e) {\r\n                instance.autostart = this.checked;\r\n                instance.buildJWAudioPlayerPreview(componentId);\r\n            });\r\n\r\n            var audioWidth = form.find('#audio-width');\r\n            audioWidth.val(this.width);\r\n            audioWidth.on('change', function () {\r\n                instance.width = this.value;\r\n                instance.resizeAudioPlayerPreview();\r\n            });\r\n        },\r\n\r\n        buildJWAudioPlayerPreview: function (componentId) {\r\n            var width = this.width;\r\n            var src = this.src;\r\n            var autostart = this.autostart;\r\n            var playerInstance = jwplayer(componentId);\r\n            playerInstance.setup({\r\n                file: src,\r\n                width: width,\r\n                height: 30,\r\n                autostart: autostart,\r\n                flashplayer: \"/static/jwplayer/6.10/jwplayer.flash.swf\",\r\n                html5player: \"/static/jwplayer/6.10/jwplayer.html5.js\",\r\n                primary: \"flash\"\r\n            });\r\n            playerInstance.onReady(function () {\r\n                log('jwplayer preview init done');\r\n            });\r\n        },\r\n\r\n        refreshAudioPlayerPreview: function () {\r\n            var instance = this;\r\n            var playerInstance = jwplayer(instance.componentId);\r\n            var src = instance.src;\r\n            playerInstance.load([{\r\n                file: src\r\n            }]);\r\n            playerInstance.play();\r\n        },\r\n\r\n        resizeAudioPlayerPreview: function () {\r\n            var instance = this;\r\n            var playerInstance = jwplayer(instance.componentId);\r\n            var width = instance.width;\r\n\r\n            playerInstance.resize(width, 30);\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n\r\n/**\r\n * Created by Anh on 7/27/2016.\r\n */\r\n/**\r\n * KEditor Carousel Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['carousel'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"carousel\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var carousel = componentContent.find('.carousel');\r\n            var id = keditor.generateId('component-carousel');\r\n            carousel.attr('id', id);\r\n            carousel.find('.carousel-indicators li').attr('data-target', id);\r\n            carousel.find('.carousel-control').attr('href', '#' + id);\r\n        },\r\n        getContent: function (component, keditor) {\r\n            var componentContent = component.children('.keditor-component-content');\r\n            return componentContent.html();\r\n        },\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Carousel settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <div class=\"carouselImageWrap\"></div>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <button type=\"button\" class=\"btn btn-block btn-primary carouselAddImage\"><i class=\"fa fa-plus\"></i> Add Image</button>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-responsive\" class=\"col-sm-12\">Cycle continuously</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" class=\"carouselWrap\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-align\" class=\"col-sm-12\">Pause</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select class=\"form-control carouselPause\">' +\r\n                '               <option selected value=\"\">No</option>' +\r\n                '               <option value=\"hover\">Hover</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-height\" class=\"col-sm-12\">Interval</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" class=\"form-control carouselInterval\" value=\"5000\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n\r\n            var basePath = window.location.pathname.substr(0, window.location.pathname.lastIndexOf('/') + 1);\r\n            var carouselAddImage = form.find('.carouselAddImage');\r\n            var carouselImageWrap = form.find('.carouselImageWrap');\r\n            var self = this;\r\n\r\n            carouselAddImage.mselect({\r\n                contentTypes: ['image'],\r\n                bs3Modal: true,\r\n                pagePath: basePath,\r\n                basePath: basePath,\r\n                onSelectFile: function (url, relUrl, type, hash) {\r\n                    flog('keditor carousel selected a file', url, hash);\r\n                    self.addImageToList(form, url, hash);\r\n                    self.addImageToCarousel(keditor.getSettingComponent(), url, hash);\r\n                }\r\n            });\r\n\r\n            carouselImageWrap.sortable({\r\n                handle: '.btn-sort-image',\r\n                items: '> .carouselImageItem',\r\n                axis: 'y',\r\n                tolerance: 'pointer',\r\n                sort: function () {\r\n                    $(this).removeClass('ui-state-default');\r\n                },\r\n                update: function () {\r\n                    self.rearrangeItems(keditor.getSettingComponent(),form);\r\n                }\r\n            });\r\n\r\n            $(document.body).on('click', '.carouselImageItem a.btn-remove-image', function (e) {\r\n                e.preventDefault();\r\n\r\n                if (confirm('Are you sure that you want to delete this image?')) {\r\n                    var btn = $(this);\r\n                    var hash = btn.closest('.btn-group').siblings('[data-hash]').attr('data-hash');\r\n\r\n                    self.refreshCarousel(keditor.getSettingComponent(), hash);\r\n                    btn.closest('.carouselImageItem').remove();\r\n                }\r\n            });\r\n\r\n            form.find('.carouselPause').on('change', function (e) {\r\n                e.preventDefault();\r\n                var comp = keditor.getSettingComponent().find('.carousel');\r\n                comp.attr('data-pause', this.value);\r\n            });\r\n\r\n            form.find('.carouselInterval').on('change', function (e) {\r\n                e.preventDefault();\r\n                var comp = keditor.getSettingComponent().find('.carousel');\r\n                comp.attr('data-interval', this.value);\r\n            });\r\n\r\n            form.find('.carouselWrap').on('click', function (e) {\r\n                var comp = keditor.getSettingComponent().find('.carousel');\r\n                if (this.checked) {\r\n                    comp.attr('data-wrap', 'true');\r\n                } else {\r\n                    comp.attr('data-wrap', 'false');\r\n                }\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            var self = this;\r\n            form.find('.carouselImageWrap').html('');\r\n            component.find('.carousel-inner > .item').each(function (index, item) {\r\n                var url = $(item).find('img').attr('src');\r\n                var hash = $(item).attr('data-hash');\r\n                self.addImageToList(form, url, hash);\r\n            });\r\n\r\n            var isWrap = component.find('.carousel').attr('data-wrap');\r\n            var pause = component.find('.carousel').attr('data-pause');\r\n            var interval = component.find('.carousel').attr('data-interval');\r\n\r\n            form.find('.carouselPause').val(pause);\r\n            form.find('.carouselInterval').val(interval);\r\n            form.find('.carouselWrap').prop('checked', isWrap === 'true');\r\n        },\r\n\r\n        addImageToCarousel: function (component, url, hash) {\r\n            var carousel = component.find('.carousel');\r\n            var index = carousel.find('.carousel-indicators').children().length;\r\n            var cls = index === 0 ? 'active' : '';\r\n            carousel.find('.carousel-indicators').append('<li data-target=\"' + carousel.attr('id') + '\" data-slide-to=\"' + index + '\" class=\"' + cls + '\"></li>');\r\n\r\n            carousel.find('.carousel-inner').append(\r\n                '<div data-hash=\"' + hash + '\" class=\"item ' + cls + '\">' +\r\n                '   <img src=\"' + url + '\" alt=\"\" width=\"100%\" height=\"\" />' +\r\n                '   <div class=\"carousel-caption\"></div>' +\r\n                '</div>'\r\n            );\r\n        },\r\n\r\n        addImageToList: function (form, src, hash) {\r\n            form.find('.carouselImageWrap').append(\r\n                '<div class=\"carouselImageItem\">' +\r\n                '   <img class=\"img-responsive\" src=\"' + src + '\" data-hash=\"' + hash + '\" />' +\r\n                '   <div class=\"btn-group btn-group-sm\">' +\r\n                '       <a class=\"btn btn-info btn-sort-image\" href=\"#\"><i class=\"fa fa-sort\"></i></a>' +\r\n                '       <a title=\"Delete this image\" class=\"btn btn-danger btn-remove-image\" href=\"#\"><i class=\"fa fa-trash\"></i></a>' +\r\n                '   </div>' +\r\n                '</div>'\r\n            );\r\n        },\r\n\r\n        refreshCarousel: function (component, hash) {\r\n            component.find('[data-hash=' + hash + ']').remove();\r\n            if (!component.find('.carousel-inner .item.active').length) {\r\n                component.find('.carousel-inner .item:first-child').addClass('active');\r\n            }\r\n            component.find('.carousel-indicators li:last-child').remove();\r\n        },\r\n\r\n        rearrangeItems: function (component, form) {\r\n            var self = this;\r\n            var carousel = component.find('.carousel');\r\n            carousel.find('.carousel-inner').html('');\r\n            carousel.find('.carousel-indicators').html('');\r\n\r\n            form.find('.carouselImageWrap').find('.carouselImageItem').each(function () {\r\n                var carouselImageItem = $(this);\r\n                var img = carouselImageItem.find('img');\r\n\r\n                self.addImageToCarousel(component, img.attr('src'), img.attr('data-hash'));\r\n            });\r\n        }\r\n    }\r\n\r\n})(jQuery);\r\n/**\r\n * KEditor Google Map Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['googlemap'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            var script = component.find('script');\r\n            if (script.length) {\r\n                script.remove();\r\n            }\r\n            component.removeAttr('data-firstLoad');\r\n            var place = component.attr('data-place');\r\n            var maptype = component.attr('data-maptype');\r\n            if (place && maptype === 'manually') {\r\n                $(window).on('load', function () {\r\n                    component.find('.btn-component-setting').trigger('click');\r\n                });\r\n            }\r\n        },\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"googlemap\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.googlemap-cover').remove();\r\n            var place = component.attr('data-place');\r\n            var maptype = component.attr('data-maptype');\r\n            component.find('.kgooglemap').html('');\r\n            var script = '<script>$(function(){if(!$(document.body).hasClass(\"content-editor-page\")){var apiKey=\"AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs\";var s=document.createElement(\"script\");s.type=\"text/javascript\";s.async=true;s.defer=true;s.src=\"https://maps.googleapis.com/maps/api/js?key=\"+apiKey+\"&callback=kgooglemapInit&libraries=places\";$(\"head\").append(s);window.kgooglemapInit=function(){var mapdiv=$(\".kgooglemap\").not(\".hide\");mapdiv.each(function(){var parent=$(this).parents(\"[data-type=component-googlemap]\");if(parent.attr(\"data-maptype\")!==\"manually\")return;var map=new google.maps.Map(this,{zoom:13,mapTypeId:\"roadmap\"});var place=parent.attr(\"data-place\");var input=parent.find(\"input\")[0];input.value=place;var searchBox=new google.maps.places.SearchBox(input);map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);setTimeout(function(){google.maps.event.trigger(input,\"focus\");google.maps.event.trigger(input,\"keydown\",{keyCode:13});},500);map.addListener(\"bounds_changed\",function(){searchBox.setBounds(map.getBounds());});var markers=[];searchBox.addListener(\"places_changed\",function(){var places=searchBox.getPlaces();if(places.length==0){return;}markers.forEach(function(marker){marker.setMap(null);});markers=[];var bounds=new google.maps.LatLngBounds();places.forEach(function(place){if(!place.geometry){console.log(\"Returned place contains no geometry\");return;}var icon={url:place.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};markers.push(new google.maps.Marker({map:map,icon:icon,title:place.name,position:place.geometry.location}));if(place.geometry.viewport){bounds.union(place.geometry.viewport);}else{bounds.extend(place.geometry.location);}});map.fitBounds(bounds);});})}}});</script>';\r\n            component.find('.embed-responsive').append(script);\r\n            return componentContent.html();\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Google Map Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"googlemap\" component');\r\n            var apiKey = 'AIzaSyBUcuZxwpBXCPztG7ot-rITXJbycPuS7gs';\r\n            var mapjs = '<script src=\"https://maps.googleapis.com/maps/api/js?key=' + apiKey + '&callback=initKeditorMapSetting&libraries=places\" async defer></script>';\r\n            if (window.google && window.google.maps && google.maps.places){\r\n                mapjs = '';\r\n            }\r\n            form.append(\r\n                mapjs +\r\n                '<form class=\"form-horizontal\" onsubmit=\"return false;\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Map type</label>' +\r\n                '       <div class=\"radio-inline\">' +\r\n                '           <label class=\"radio-inline\"><input checked type=\"radio\" name=\"mapType\" class=\"mapType\" value=\"embed\"> Embed</label>' +\r\n                '           <label class=\"radio-inline\"><input type=\"radio\" name=\"mapType\" class=\"mapType\" value=\"manually\"> Manually</label>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group embed\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <textarea class=\"form-control\" name=\"mapEmbedCode\" placeholder=\"Embed code\"></textarea>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group manually hide\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input class=\"form-control\" name=\"mapAddress\" placeholder=\"Enter address\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Aspect Ratio</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <button type=\"button\" class=\"btn btn-sm btn-default btn-googlemap-169\">16:9</button>' +\r\n                '           <button type=\"button\" class=\"btn btn-sm btn-default btn-googlemap-43\">4:3</button>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n            form.find('.mapType').on('click', function (e) {\r\n                if (this.checked) {\r\n                    $('.' + this.value).removeClass('hide');\r\n                    var cls = form.find('.mapType').not(this).val();\r\n                    $('.' + cls).addClass('hide');\r\n                    var comp = keditor.getSettingComponent();\r\n                    comp.attr('data-maptype', this.value);\r\n                    if (this.value === 'manually') {\r\n                        comp.find('iframe').addClass('hide');\r\n                        comp.find('.kgooglemap').removeClass('hide');\r\n                        if (comp.find('.kgooglemap').data('map')) {\r\n                            google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\r\n                        } else {\r\n                            self.initAutocomplete(comp, form);\r\n                            var input = form.find('[name=mapAddress]')[0];\r\n                            var i = setInterval(function(){\r\n                                if (comp.find('.kgooglemap').data('map')){\r\n                                    clearInterval(i);\r\n                                    google.maps.event.trigger(input, 'focus')\r\n                                    google.maps.event.trigger(input, 'keydown', {\r\n                                        keyCode: 13\r\n                                    });\r\n                                }\r\n                            },100);\r\n                        }\r\n                    } else {\r\n                        comp.find('iframe').removeClass('hide');\r\n                        comp.find('.kgooglemap').addClass('hide');\r\n                    }\r\n                }\r\n            });\r\n\r\n            var self = this;\r\n            form.find('[name=mapEmbedCode]').on('change', function () {\r\n                var iframe = $(this.value);\r\n                var src = iframe.attr('src');\r\n                if (iframe.length > 0 && src && src.length > 0) {\r\n                    keditor.getSettingComponent().find('.embed-responsive-item').attr('src', src);\r\n                } else {\r\n                    alert('Your Google Map embed code is invalid!');\r\n                }\r\n            });\r\n\r\n\r\n            var btn169 = form.find('.btn-googlemap-169');\r\n            var btn43 = form.find('.btn-googlemap-43');\r\n\r\n            btn169.on('click', function (e) {\r\n                e.preventDefault();\r\n                $(this).addClass('btn-primary').removeClass('btn-default');\r\n                btn43.removeClass('btn-primary').addClass('btn-default');\r\n                keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n                var comp = keditor.getSettingComponent();\r\n                if (comp.attr('maptype') === 'manually') {\r\n                    if (comp.find('.kgooglemap').data('map')) {\r\n                        google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\r\n                    }\r\n                }\r\n            });\r\n\r\n            btn43.on('click', function (e) {\r\n                e.preventDefault();\r\n                $(this).addClass('btn-primary').removeClass('btn-default');\r\n                btn169.removeClass('btn-primary').addClass('btn-default');\r\n                keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n                var comp = keditor.getSettingComponent();\r\n                if (comp.attr('maptype') === 'manually') {\r\n                    if (comp.find('.kgooglemap').data('map')) {\r\n                        google.maps.event.trigger(comp.find('.kgooglemap').data('map'), \"resize\");\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        showSettingForm: function (form, component, keditor) {\r\n            var self = this;\r\n            var maptype = component.attr('data-maptype');\r\n            var place = component.attr('data-place');\r\n            var ratio169 = component.find('.embed-responsive').hasClass('embed-responsive-16by9');\r\n            var ratio43 = component.find('.embed-responsive').hasClass('embed-responsive-4by3');\r\n            if (ratio43){\r\n                form.find('.btn-googlemap-43').addClass('btn-primary').removeClass('btn-default');\r\n            }\r\n            if (ratio169){\r\n                form.find('.btn-googlemap-169').addClass('btn-primary').removeClass('btn-default');\r\n            }\r\n            form.find('.mapType[value=' + maptype + ']').prop('checked', true);\r\n            var src = component.find('iframe').attr('src');\r\n            var iframe = '<iframe class=\"embed-responsive-item\" src=\"' + src + '\"></iframe>';\r\n            if (!place){\r\n                place = 'Hanoi, Vietnam';\r\n            }\r\n            form.find('[name=mapAddress]').val(place);\r\n            form.find('[name=mapEmbedCode]').val(iframe);\r\n            var firstLoad = component.attr('data-firstLoad');\r\n            if (maptype === 'manually') {\r\n                form.find('.manually').removeClass('hide').siblings('.embed').addClass('hide');\r\n\r\n                if (!firstLoad && place) {\r\n                    var i = setInterval(function () {\r\n                        if (window.googleMapInitialized) {\r\n                            clearInterval(i);\r\n                            self.initAutocomplete(component, form);\r\n                            setTimeout(function () {\r\n                                var input = form.find('[name=mapAddress]')[0];\r\n                                google.maps.event.trigger(input, 'focus')\r\n                                google.maps.event.trigger(input, 'keydown', {\r\n                                    keyCode: 13\r\n                                });\r\n                                component.attr('data-firstLoad', 'false');\r\n                            }, 1000);\r\n                        }\r\n                    }, 100);\r\n                }\r\n            } else {\r\n                form.find('.manually').addClass('hide').siblings('.embed').removeClass('hide');\r\n            }\r\n        },\r\n\r\n        initAutocomplete: function (component, form) {\r\n            if (!window.googleMapInitialized) {\r\n                alert('google map is not initialized');\r\n                return;\r\n            }\r\n            var mapdiv = component.find('.kgooglemap')[0];\r\n            var map = new google.maps.Map(mapdiv, {\r\n                zoom: 13,\r\n                mapTypeId: 'roadmap'\r\n            });\r\n            // Create the search box and link it to the UI element.\r\n            var input = form.find('[name=mapAddress]')[0];\r\n            var searchBox = new google.maps.places.SearchBox(input);\r\n            //map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\r\n\r\n            // Bias the SearchBox results towards current map's viewport.\r\n            map.addListener('bounds_changed', function () {\r\n                searchBox.setBounds(map.getBounds());\r\n            });\r\n\r\n            var markers = [];\r\n            // Listen for the event fired when the user selects a prediction and retrieve\r\n            // more details for that place.\r\n\r\n            searchBox.addListener('places_changed', function () {\r\n                var places = searchBox.getPlaces();\r\n\r\n                if (places.length == 0) {\r\n                    return;\r\n                }\r\n\r\n                // Clear out the old markers.\r\n                markers.forEach(function (marker) {\r\n                    marker.setMap(null);\r\n                });\r\n                markers = [];\r\n                // For each place, get the icon, name and location.\r\n                var bounds = new google.maps.LatLngBounds();\r\n                places.forEach(function (place) {\r\n                    if (!place.geometry) {\r\n                        console.log(\"Returned place contains no geometry\");\r\n                        return;\r\n                    }\r\n\r\n                    var icon = {\r\n                        url: place.icon,\r\n                        size: new google.maps.Size(71, 71),\r\n                        origin: new google.maps.Point(0, 0),\r\n                        anchor: new google.maps.Point(17, 34),\r\n                        scaledSize: new google.maps.Size(25, 25)\r\n                    };\r\n\r\n                    // Create a marker for each place.\r\n                    markers.push(new google.maps.Marker({\r\n                        map: map,\r\n                        icon: icon,\r\n                        title: place.name,\r\n                        position: place.geometry.location\r\n                    }));\r\n\r\n                    if (place.geometry.viewport) {\r\n                        // Only geocodes have viewport.\r\n                        bounds.union(place.geometry.viewport);\r\n                    } else {\r\n                        bounds.extend(place.geometry.location);\r\n                    }\r\n                });\r\n                map.fitBounds(bounds);\r\n                component.attr('data-place', input.value);\r\n            });\r\n\r\n            component.find('.kgooglemap').data('map', map);\r\n        }\r\n    };\r\n\r\n    window.initKeditorMapSetting = function () {\r\n        window.googleMapInitialized = true;\r\n    }\r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Jumbotron Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['jumbotron'] = {\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Jumbotron Settings',\r\n        init: function(contentArea, container, component, keditor){\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.prop('contenteditable', true);\r\n\r\n            componentContent.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(contentArea, e, component);\r\n                }\r\n\r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(contentArea, e, container);\r\n                }\r\n\r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(contentArea, e);\r\n                }\r\n            });\r\n\r\n            var editor = componentContent.ckeditor(keditor.options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n\r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n        },\r\n\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"jumbotron\" component', component);\r\n\r\n            var componentContent = component.find('.keditor-component-content');\r\n            var id = componentContent.attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                return editor.getData();\r\n            } else {\r\n                return componentContent.html();\r\n            }\r\n        },\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"jumbotron\" component');\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '    <div class=\"form-group\">' +\r\n                '       <div class=\"col-md-12\">' +\r\n                '           <label>Background Color</label>' +\r\n                '           <div class=\"input-group button-color-picker\">' +\r\n                '               <span class=\"input-group-addon\"><i></i></span>' +\r\n                '               <input type=\"text\" value=\"\" name=\"button-color\" class=\"form-control\" />' +\r\n                '           </div>' +\r\n                '       </div>' +\r\n                '    </div>' +\r\n                '    <div class=\"form-group\">' +\r\n                '       <div class=\"col-md-12\">' +\r\n                '           <label>Is inverse</label><br />' +\r\n                '           <input type=\"checkbox\" value=\"\" class=\"chk-inverse\" />' +\r\n                '       </div>' +\r\n                '    </div>' +\r\n                '    <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Rounded</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <div class=\"radio\"><label><input type=\"radio\" name=\"rounded\" value=\"true\" checked> Yes</label></div>' +\r\n                '           <div class=\"radio\"><label><input type=\"radio\" name=\"rounded\" value=\"false\"> No</label></div>' +\r\n                '       </div>' +\r\n                '    </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-md-12\"><label>Inner Padding (in px)</label>' +\r\n                '           <div class=\"row row-sm text-center\">' +\r\n                '               <div class=\"col-xs-4 col-xs-offset-4\">' +\r\n                '                   <input type=\"number\" value=\"\" name=\"padding-top\" class=\"paddingSettings form-control\"/>' +\r\n                '                   <small>top</small>' +\r\n                '               </div>' +\r\n                '           </div>' +\r\n                '           <div class=\"row row-sm text-center\">' +\r\n                '               <div class=\"col-xs-4\">' +\r\n                '                   <input type=\"number\" value=\"\" name=\"padding-left\" class=\"paddingSettings form-control\"/> ' +\r\n                '                   <small>left</small>' +\r\n                '               </div>' +\r\n                '               <div class=\"col-xs-4 col-xs-offset-4\">' +\r\n                '                   <input type=\"number\" value=\"\" name=\"padding-right\" class=\"paddingSettings form-control\"/>' +\r\n                '                   <small>right</small>' +\r\n                '               </div>' +\r\n                '           </div> '+\r\n                '           <div class=\"row row-sm text-center\">' +\r\n                '               <div class=\"col-xs-4 col-xs-offset-4\">' +\r\n                '                   <input type=\"number\" value=\"\" name=\"padding-bottom\" class=\"paddingSettings form-control\"/>' +\r\n                '                   <small>bottom</small>' +\r\n                '               </div>' +\r\n                '           </div>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-md-12\"><label>Margins (in px)</label>' +\r\n                '           <div class=\"row row-sm text-center\">' +\r\n                '               <div class=\"col-xs-4 col-xs-offset-4\">' +\r\n                '                   <input type=\"number\" value=\"\" name=\"margin-top\" class=\"marginSettings form-control\"/>' +\r\n                '                   <small>top</small>' +\r\n                '               </div>' +\r\n                '           </div>' +\r\n                '           <div class=\"row row-sm text-center\">' +\r\n                '               <div class=\"col-xs-4\">' +\r\n                '                   <input type=\"number\" value=\"\" name=\"margin-left\" class=\"marginSettings form-control\"/> ' +\r\n                '                   <small>left</small>' +\r\n                '               </div>' +\r\n                '               <div class=\"col-xs-4 col-xs-offset-4\">' +\r\n                '                   <input type=\"number\" value=\"\" name=\"margin-right\" class=\"marginSettings form-control\"/>' +\r\n                '                   <small>right</small>' +\r\n                '               </div>' +\r\n                '           </div> '+\r\n                '           <div class=\"row row-sm text-center\">' +\r\n                '               <div class=\"col-xs-4 col-xs-offset-4\">' +\r\n                '                   <input type=\"number\" value=\"\" name=\"margin-bottom\" class=\"marginSettings form-control\"/>' +\r\n                '                   <small>bottom</small>' +\r\n                '               </div>' +\r\n                '           </div>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n\r\n            form.find('.chk-inverse').on('click', function () {\r\n                var comp = keditor.getSettingComponent();\r\n                comp.find('.jumbotron')[this.checked ? 'addClass': 'removeClass']('jumbotron-inverse');\r\n            });\r\n\r\n            form.find('[name=rounded]').on('click', function (e) {\r\n                var comp = keditor.getSettingComponent();\r\n                if (this.value == 'false') {\r\n                    comp.find('.jumbotron').css('border-radius', '0');\r\n                } else {\r\n                    comp.find('.jumbotron').css('border-radius', '');\r\n                }\r\n            });\r\n\r\n            var buttonColorPicker = form.find('.button-color-picker');\r\n            initColorPicker(buttonColorPicker, function (color) {\r\n                var comp = keditor.getSettingComponent();\r\n\r\n                if (color && color !== 'transparent') {\r\n                    comp.find('.jumbotron').css('background-color', color);\r\n                    comp.attr('data-bgcolor', color);\r\n                } else {\r\n                    comp.find('.jumbotron').css('background-color', '');\r\n\r\n                    form.find('.button-color').val('');\r\n                }\r\n            });\r\n\r\n            var paddingSettings = form.find('.paddingSettings');\r\n            paddingSettings.on('change', function () {\r\n                var paddingValue = this.value || '';\r\n                var component = keditor.getSettingComponent();\r\n                var paddingProp = $(this).attr('name');\r\n                if (paddingValue.trim() === '') {\r\n                    component.find('.jumbotron').css(paddingProp, '');\r\n                } else {\r\n                    if (isNaN(paddingValue)) {\r\n                        paddingValue = 0;\r\n                        this.value = paddingValue;\r\n                    }\r\n                    component.find('.jumbotron').css(paddingProp, paddingValue + 'px');\r\n                }\r\n            });\r\n\r\n            var marginSettings = form.find('.marginSettings');\r\n            marginSettings.on('change', function () {\r\n                var paddingValue = this.value || '';\r\n                var component = keditor.getSettingComponent();\r\n                var paddingProp = $(this).attr('name');\r\n                if (paddingValue.trim() === '') {\r\n                    component.find('.jumbotron').css(paddingProp, '');\r\n                } else {\r\n                    if (isNaN(paddingValue)) {\r\n                        paddingValue = 0;\r\n                        this.value = paddingValue;\r\n                    }\r\n                    component.find('.jumbotron').css(paddingProp, paddingValue + 'px');\r\n                }\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"jumbotron\" component', component);\r\n            form.find('[name=button-color]').val(component.attr('data-bgcolor')).trigger('change');\r\n            form.find('.paddingSettings').each(function(){\r\n                $(this).val(component.find('.jumbotron').css($(this).attr('name')).replace('px',''));\r\n            });\r\n            form.find('.marginSettings').each(function(){\r\n                $(this).val(component.find('.jumbotron').css($(this).attr('name')).replace('px',''));\r\n            });\r\n            form.find('[name=showButton][value=false]').prop('checked', component.find('a').hasClass('hide'));\r\n            form.find('[name=rounded][value=false]').prop('checked', component.find('.jumbotron').css('border-radius').replace('px', '') === '0');\r\n            form.find('.chk-inverse').prop('checked', component.find('.jumbotron').hasClass('jumbotron-inverse'));\r\n        },\r\n\r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n\r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n\r\n\r\n/**\r\n * KEditor SVG Map Component (Australia)\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['ksvgmap'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            var script = component.find('script');\r\n            if (script.length) {\r\n                script.remove();\r\n            }\r\n            if (component.attr('data-height')){\r\n                component.find('.ksvgmap').css('height', +component.attr('data-height'));\r\n            }\r\n            $.getScriptOnce('/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js', function () {\r\n                $.getScriptOnce('/static/jquery-jvectormap/jquery-jvectormap-au-mill.js', function () {\r\n                    component.find('.ksvgmap').vectorMap({\r\n                        map: 'au_mill',\r\n                        backgroundColor: '#fff',\r\n                        zoomButtons: false,\r\n                        focusOn: {\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            scale: 1\r\n                        },\r\n                        regionStyle: {\r\n                            initial: {\r\n                                fill: '#efefef'\r\n                            },\r\n                            hover: {\r\n                                fill: \"#00aa90\"\r\n                            }\r\n                        },\r\n                        onRegionTipShow: function (e, el, code) {\r\n                            if (component.attr('data-' + code))\r\n                                el.html(el.html() + ' - ' + component.attr('data-' + code));\r\n                        }\r\n                    });\r\n                    var i = setInterval(function(){\r\n                        try {\r\n                            var map = component.find('.ksvgmap').vectorMap('get', 'mapObject');\r\n                            map.updateSize();\r\n                            clearInterval(i);\r\n                        } catch (e){\r\n                            flog('trying to get jvectormap object');\r\n                        }\r\n                    },50);\r\n                });\r\n            });\r\n        },\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"svgmap\" component', component);\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var script = '<script>$(function(){$(document.body).hasClass(\"content-editor-page\")||$.getScriptOnce(\"/static/jquery-jvectormap/jquery-jvectormap-2.0.3.min.js\",function(){$.getScriptOnce(\"/static/jquery-jvectormap/jquery-jvectormap-au-mill.js\",function(){$(\".ksvgmap\").each(function(){var a=$(this).parents(\"[data-type=component-ksvgmap]\");a.hasClass(\"ksvgInit\")||(a.addClass(\"ksvgInit\"),$(this).vectorMap({map:\"au_mill\",backgroundColor:\"#fff\",zoomButtons:!1,scale:5,regionStyle:{initial:{fill:\"#efefef\"},hover:{fill:\"#00aa90\"}},onRegionTipShow:function(b,c,d){a.attr(\"data-\"+d)&&c.html(\"<span class=\\'vectormap-tip-region-name\\'>\"+c.html()+\"</span><span class=\\'vectormap-tip-separator\\'> - </span><span class=\\'vectormap-tip-region-data\\'>\"+a.attr(\"data-\"+d)+\"</span>\")}}))})})})});</script>';\r\n            var css = '<link rel=\"stylesheet\" href=\"/static/jquery-jvectormap/jquery-jvectormap-2.0.3.css\">';\r\n            component.find('.jvectormap-container').remove();\r\n            var arr = $(document.body).find('[data-type=\"component-ksvgmap\"]:not(.keditor-snippet)');\r\n            if (arr.length > 0){\r\n                if ($(arr[arr.length-1]).attr('id') === component.attr('id')){\r\n                    $(css).insertBefore(component.find('.ksvgmap'));\r\n                    $(script).insertAfter(component.find('.ksvgmap'));\r\n                }\r\n            }\r\n\r\n            return componentContent.html();\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'SVGMap Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"svgmap\" component');\r\n            form.append(\r\n                '<form class=\"form-horizontal\" onsubmit=\"return false;\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Section</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select class=\"form-control state\">' +\r\n                '               <option value=\"AU-QLD\">Queensland</option>' +\r\n                '               <option value=\"AU-NSW\">New South Wales</option>' +\r\n                '               <option value=\"AU-ACT\">Australian Capital Territory</option>' +\r\n                '               <option value=\"AU-VIC\">Victoria</option>' +\r\n                '               <option value=\"AU-TAS\">Tasmania</option>' +\r\n                '               <option value=\"AU-SA\">South Australia</option>' +\r\n                '               <option value=\"AU-NT\">Northern Territory</option>' +\r\n                '               <option value=\"AU-WA\">Western Australia</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group embed\">' +\r\n                '       <label class=\"col-sm-12\">Section Message</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <textarea rows=\"2\" class=\"form-control stateMessage\" placeholder=\"State Message\"></textarea>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Height(px)</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" class=\"form-control height\" value=\"300\" placeholder=\"Height\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n            var component = keditor.getSettingComponent();\r\n            form.find('.state').on('change', function (e) {\r\n                var val = component.attr('data-' + this.value);\r\n                form.find('.stateMessage').val(val);\r\n            });\r\n            form.find('.stateMessage').on('change', function (e) {\r\n                var currentState = form.find('.state').val();\r\n                component.attr('data-' + currentState, this.value);\r\n            });\r\n            form.find('.height').on('change', function (e) {\r\n                component.attr('data-height', this.value);\r\n                component.find('.ksvgmap').css('height', this.value);\r\n                var map = component.find('.ksvgmap').vectorMap('get', 'mapObject');\r\n                map.updateSize();\r\n            });\r\n        },\r\n        showSettingForm: function (form, component, keditor) {\r\n            var height = component.attr('data-height');\r\n            var defaultState = form.find('.state').val();\r\n            form.find('.height').val(height);\r\n            form.find('.stateMessage').val(component.attr('data-' + defaultState));\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Photo Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['photo'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"photo\" component', component);\r\n\r\n            var componentContent = component.children('.keditor-component-content');\r\n            var img = componentContent.find('img');\r\n\r\n            img.css('display', 'inline-block');\r\n            img.css('vertical-align', 'middle');\r\n\r\n            var options = keditor.options;\r\n            if (typeof options.onComponentReady === 'function') {\r\n                options.onComponentReady.call(contentArea, component);\r\n            }\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Photo Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"photo\" component');\r\n            \r\n            var self = this;\r\n            var options = keditor.options;\r\n\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <button type=\"button\" class=\"btn btn-block btn-primary\" id=\"photo-edit\">Change Photo</button>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-align\" class=\"col-sm-12\">Align</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select id=\"photo-align\" class=\"form-control\">' +\r\n                '               <option value=\"left\">Left</option>' +\r\n                '               <option value=\"center\">Center</option>' +\r\n                '               <option value=\"right\">Right</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"vertical-alignment\" class=\"col-sm-12\">V Align</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select class=\"form-control\" id=\"v-align\">' +\r\n                '               <option value=\"top\">Top</option>' +\r\n                '               <option value=\"middle\">Middle</option>' +\r\n                '               <option value=\"bottom\">Bottom</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-style\" class=\"col-sm-12\">Style</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select id=\"photo-style\" class=\"form-control\">' +\r\n                '               <option value=\"\">None</option>' +\r\n                '               <option value=\"img-rounded\">Rounded</option>' +\r\n                '               <option value=\"img-circle\">Circle</option>' +\r\n                '               <option value=\"img-thumbnail\">Thumbnail</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-responsive\" class=\"col-sm-12\">Responsive</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"photo-responsive\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-width\" class=\"col-sm-12\">Width</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" id=\"photo-width\" class=\"form-control\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-height\" class=\"col-sm-12\">Height</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" id=\"photo-height\" class=\"form-control\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-width\" class=\"col-sm-12\">Linkable</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"photo-linkable\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-height\" class=\"col-sm-12\">Link</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"text\" id=\"photo-link\" class=\"form-control\" disabled=\"disabled\" />' +\r\n                '           <span class=\"help-block\" style=\"display: none;\">Link is invalid</span>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"photo-height\" class=\"col-sm-12\">Open link in</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select class=\"form-control\" id=\"photo-target\" disabled=\"disabled\">' +\r\n                '               <option value=\"\" selected=\"selected\">Current tab/window</option>' +\r\n                '               <option value=\"_blank\">New tab/window</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n\r\n            var txtLink = form.find('#photo-link');\r\n            txtLink.on('change', function () {\r\n                var link = this.value.trim();\r\n                var pattern = new RegExp('^[a-zA-Z0-9_/%:/./-]+$');\r\n                var span = txtLink.next();\r\n                var formGroup = txtLink.closest('.form-group');\r\n\r\n                if (pattern.test(link)) {\r\n                    keditor.getSettingComponent().find('a').attr('href', link);\r\n                    span.hide();\r\n                    formGroup.removeClass('has-error');\r\n                } else {\r\n                    span.show();\r\n                    formGroup.addClass('has-error');\r\n                }\r\n            });\r\n\r\n            var cbbTarget = form.find('#photo-target');\r\n            cbbTarget.on('change', function () {\r\n                keditor.getSettingComponent().find('a').attr('target', this.value);\r\n            });\r\n\r\n            var chkLinkable = form.find('#photo-linkable');\r\n            chkLinkable.on('click', function () {\r\n                var img = keditor.getSettingComponent().find('img');\r\n\r\n                if (chkLinkable.is(':checked')) {\r\n                    txtLink.prop('disabled', false);\r\n                    cbbTarget.prop('disabled', false);\r\n                    img.wrap('<a href=\"\"></a>');\r\n                } else {\r\n                    txtLink.prop('disabled', true);\r\n                    cbbTarget.prop('disabled', true);\r\n                    img.unwrap('a');\r\n                }\r\n            });\r\n            \r\n            var photoEdit = form.find('#photo-edit');\r\n            photoEdit.mselect({\r\n                contentTypes: ['image'],\r\n                bs3Modal: true,\r\n                pagePath: options.pagePath,\r\n                basePath: options.basePath,\r\n                onSelectFile: function (url, relativeUrl, fileType, hash) {\r\n                    var img = keditor.getSettingComponent().find('img');\r\n                    img.attr('src', \"/_hashes/files/\" + hash);\r\n                    self.showSettingForm(form, keditor.getSettingComponent(), options);\r\n                }\r\n            });\r\n\r\n            var inputAlign = form.find('#photo-align');\r\n            inputAlign.on('change', function () {\r\n                var panel = keditor.getSettingComponent().find('.photo-panel');\r\n                panel.css('text-align', this.value);\r\n            });\r\n\r\n            var inputVAlign = form.find('#v-align');\r\n            inputVAlign.on('change', function () {\r\n                var panel = keditor.getSettingComponent().find('.photo-panel').find('img');\r\n                panel.css('vertical-align', this.value);\r\n            });\r\n\r\n            var inputResponsive = form.find('#photo-responsive');\r\n            inputResponsive.on('click', function () {\r\n                keditor.getSettingComponent().find('img')[this.checked ? 'addClass' : 'removeClass']('img-responsive');\r\n            });\r\n\r\n            var cbbStyle = form.find('#photo-style');\r\n            cbbStyle.on('change', function () {\r\n                var img = keditor.getSettingComponent().find('img');\r\n                var val = this.value;\r\n\r\n                img.removeClass('img-rounded img-circle img-thumbnail');\r\n                if (val) {\r\n                    img.addClass(val);\r\n                }\r\n            });\r\n\r\n            var inputWidth = form.find('#photo-width');\r\n            var inputHeight = form.find('#photo-height');\r\n            inputWidth.on('change', function () {\r\n                var img = keditor.getSettingComponent().find('img');\r\n                var newWidth = +this.value;\r\n                var newHeight = Math.round(newWidth / self.ratio);\r\n\r\n                if (newWidth <= 0) {\r\n                    newWidth = self.width;\r\n                    newHeight = self.height;\r\n                    this.value = newWidth;\r\n                }\r\n\r\n                img.css({\r\n                    'width': newWidth,\r\n                    'height': newHeight\r\n                });\r\n                inputHeight.val(newHeight);\r\n            });\r\n            inputHeight.on('change', function () {\r\n                var img = keditor.getSettingComponent().find('img');\r\n                var newHeight = +this.value;\r\n                var newWidth = Math.round(newHeight * self.ratio);\r\n\r\n                if (newHeight <= 0) {\r\n                    newWidth = self.width;\r\n                    newHeight = self.height;\r\n                    this.value = newHeight;\r\n                }\r\n\r\n                img.css({\r\n                    'height': newHeight,\r\n                    'width': newWidth\r\n                });\r\n                inputWidth.val(newWidth);\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"photo\" component', component);\r\n\r\n            var self = this;\r\n            var inputAlign = form.find('#photo-align');\r\n            var inputVAlign = form.find('#v-align');\r\n            var inputResponsive = form.find('#photo-responsive');\r\n            var inputWidth = form.find('#photo-width');\r\n            var inputHeight = form.find('#photo-height');\r\n            var cbbStyle = form.find('#photo-style');\r\n            var txtLink = form.find('#photo-link');\r\n            var cbbTarget = form.find('#photo-target');\r\n            var chkLinkable = form.find('#photo-linkable');\r\n\r\n            txtLink.next().hide();\r\n            txtLink.closest('.form-group').removeClass('has-error');\r\n\r\n            var panel = component.find('.photo-panel');\r\n            var img = panel.find('img');\r\n\r\n            var a = img.parent('a');\r\n            if (a.length > 0) {\r\n                chkLinkable.prop('checked', true);\r\n                txtLink.prop('disabled', false).val(a.attr('href'));\r\n                cbbTarget.prop('disabled', false).val(a.attr('target'));\r\n            } else {\r\n                chkLinkable.prop('checked', false);\r\n                txtLink.prop('disabled', true).val('');\r\n                cbbTarget.prop('disabled', true).val('');\r\n            }\r\n\r\n            var algin = panel.css('text-align');\r\n            if (algin !== 'right' || algin !== 'center') {\r\n                algin = 'left';\r\n            }\r\n\r\n            var valign = img.css('vertical-align');\r\n\r\n            if (img.hasClass('img-rounded')) {\r\n                cbbStyle.val('img-rounded');\r\n            } else if (img.hasClass('img-circle')) {\r\n                cbbStyle.val('img-circle');\r\n            } else if (img.hasClass('img-thumbnail')) {\r\n                cbbStyle.val('img-thumbnail');\r\n            } else {\r\n                cbbStyle.val('');\r\n            }\r\n            debugger;\r\n            inputAlign.val(algin);\r\n            inputVAlign.val(valign);\r\n            inputResponsive.prop('checked', img.hasClass('img-responsive'));\r\n            inputWidth.val(img.width());\r\n            inputHeight.val(img.height());\r\n\r\n            $('<img />').attr('src', img.attr('src')).load(function () {\r\n                self.ratio = this.width / this.height;\r\n                self.width = this.width;\r\n                self.height = this.height;\r\n            });\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Text Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n    \r\n    CKEDITOR.disableAutoInline = true;\r\n    CKEDITOR.dtd.$removeEmpty['i'] = false;\r\n    \r\n    // Text component\r\n    // ---------------------------------------------------------------------\r\n    KEditor.components['text'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"text\" component', component);\r\n            \r\n            var options = keditor.options;\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var ckeditorPlace = componentContent.find('.keditor-component-text-content-inner');\r\n            \r\n            if (ckeditorPlace.length === 0) {\r\n                var contentHtml = componentContent.html();\r\n                ckeditorPlace = $('<div class=\"keditor-component-text-content-inner clearfix\"></div>');\r\n                componentContent.html(ckeditorPlace);\r\n                ckeditorPlace.html(contentHtml);\r\n                ckeditorPlace.wrap('<div class=\"keditor-component-text-content\"></div>');\r\n            }\r\n            \r\n            if (!ckeditorPlace.attr('id')) {\r\n                ckeditorPlace.attr('id', keditor.generateId('component-text-content-inner'));\r\n            }\r\n            \r\n            ckeditorPlace.prop('contenteditable', true);\r\n            ckeditorPlace.on('input', function (e) {\r\n                if (typeof options.onComponentChanged === 'function') {\r\n                    options.onComponentChanged.call(contentArea, e, component);\r\n                }\r\n                \r\n                if (typeof options.onContainerChanged === 'function') {\r\n                    options.onContainerChanged.call(contentArea, e, container);\r\n                }\r\n                \r\n                if (typeof options.onContentChanged === 'function') {\r\n                    options.onContentChanged.call(contentArea, e);\r\n                }\r\n            });\r\n            \r\n            var editor = ckeditorPlace.ckeditor(keditor.options.ckeditorOptions).editor;\r\n            editor.on('instanceReady', function () {\r\n                flog('CKEditor is ready', component);\r\n                \r\n                if (typeof options.onComponentReady === 'function') {\r\n                    options.onComponentReady.call(contentArea, component, editor);\r\n                }\r\n            });\r\n        },\r\n        \r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"text\" component', component);\r\n            \r\n            var componentContent = component.find('.keditor-component-content');\r\n            var componentTextContent = componentContent.find('.keditor-component-text-content');\r\n            \r\n            var id = componentTextContent.children().attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                componentTextContent.html('<div class=\"keditor-component-text-content-inner clearfix\">' + editor.getData() + '</div>');\r\n            }\r\n            \r\n            return componentContent.html();\r\n        },\r\n        \r\n        destroy: function (component, keditor) {\r\n            flog('destroy \"text\" component', component);\r\n            \r\n            var id = component.find('.keditor-component-content').attr('id');\r\n            var editor = CKEDITOR.instances[id];\r\n            if (editor) {\r\n                editor.destroy();\r\n            }\r\n        },\r\n        \r\n        settingEnabled: true,\r\n        \r\n        settingTitle: 'Text Settings',\r\n        \r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"text\" component');\r\n            \r\n            return $.ajax({\r\n                url: '/static/keditor/componentTextSettings.html',\r\n                type: 'get',\r\n                dataType: 'HTML',\r\n                success: function (resp) {\r\n                    form.html(resp);\r\n                    \r\n                    // =================================================================================\r\n                    // Backgrounds\r\n                    // =================================================================================\r\n                    var basePath = window.location.pathname.replace('contenteditor', '');\r\n                    if (keditor.options.basePath) {\r\n                        basePath = keditor.options.basePath;\r\n                    }\r\n                    form.find('.background-image-edit').mselect({\r\n                        contentTypes: ['image'],\r\n                        bs3Modal: true,\r\n                        pagePath: basePath,\r\n                        basePath: basePath,\r\n                        onSelectFile: function (url, relativeUrl, fileType, hash) {\r\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                            var imageUrl = 'http://' + window.location.host + '/_hashes/files/' + hash;\r\n                            target.css('background-image', 'url(\"' + imageUrl + '\")');\r\n                            form.find('.background-image-previewer').attr('src', imageUrl);\r\n                        }\r\n                    });\r\n                    form.find('.background-image-delete').on('click', function (e) {\r\n                        e.preventDefault();\r\n        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('background-image', '');\r\n                        form.find('.background-image-previewer').attr('src', '/static/images/photo_holder.png');\r\n                    });\r\n                    \r\n                    var colorPicker = form.find('.color-picker');\r\n                    initColorPicker(colorPicker, function (color) {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        if (color && color !== 'transparent') {\r\n                            target.css('background-color', color);\r\n                        } else {\r\n                            target.css('background-color', '');\r\n                        }\r\n                    });\r\n                    \r\n                    form.find('.select-bg-repeat').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-repeat', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-bg-size').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-size', this.value);\r\n                    });\r\n                    \r\n                    form.find('.select-bg-position').on('change', function () {\r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        \r\n                        target.css('background-position', this.value);\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Padding\r\n                    // =================================================================================\r\n                    form.find('.txt-padding').each(function () {\r\n                        var txt = $(this);\r\n                        var styleName = txt.attr('data-style-name');\r\n                        \r\n                        txt.on('change', function () {\r\n                            var paddingValue = this.value || '';\r\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content').get(0);\r\n                            \r\n                            if (paddingValue.trim() === '') {\r\n                                target.style[styleName] = '';\r\n                            } else {\r\n                                if (isNaN(paddingValue)) {\r\n                                    paddingValue = 0;\r\n                                    this.value = paddingValue;\r\n                                }\r\n                                target.style[styleName] = paddingValue + 'px';\r\n                            }\r\n                        });\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Margin\r\n                    // =================================================================================\r\n                    form.find('.txt-margin').each(function () {\r\n                        var txt = $(this);\r\n                        var styleName = txt.attr('data-style-name');\r\n                        \r\n                        txt.on('change', function () {\r\n                            var marginValue = this.value || '';\r\n                            var target = keditor.getSettingComponent().find('.keditor-component-text-content').get(0);\r\n                            \r\n                            if (marginValue.trim() === '') {\r\n                                target.style[styleName] = '';\r\n                            } else {\r\n                                if (isNaN(marginValue)) {\r\n                                    marginValue = 0;\r\n                                    this.value = marginValue;\r\n                                }\r\n                                target.style[styleName] = marginValue + 'px';\r\n                            }\r\n                        });\r\n                    });\r\n                    \r\n                    // =================================================================================\r\n                    // Width and Height\r\n                    // =================================================================================\r\n                    form.find('.txt-height').on('change', function () {\r\n                        var height = this.value || '';\r\n                        if (isNaN(height)) {\r\n                            height = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('height', height);\r\n                    });\r\n                    \r\n                    form.find('.txt-max-height').on('change', function () {\r\n                        var maxHeight = this.value || '';\r\n                        if (isNaN(maxHeight)) {\r\n                            maxHeight = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('max-height', maxHeight + 'px');\r\n                    });\r\n                    \r\n                    form.find('.txt-width').on('change', function () {\r\n                        var width = this.value || '';\r\n                        if (isNaN(width)) {\r\n                            width = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('width', width);\r\n                    });\r\n                    \r\n                    form.find('.txt-max-width').on('change', function () {\r\n                        var maxWidth = this.value || '';\r\n                        if (isNaN(maxWidth)) {\r\n                            maxWidth = '';\r\n                        }\r\n                        \r\n                        var target = keditor.getSettingComponent().find('.keditor-component-text-content');\r\n                        target.css('max-width', maxWidth + 'px');\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        \r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"text\" component', component);\r\n    \r\n            var target = component.find('.keditor-component-text-content').get(0);\r\n    \r\n            var imageUrl = target.style.backgroundImage;\r\n            imageUrl = (imageUrl || '').replace(/^url\\(['\"]+(.+)['\"]+\\)$/, '$1');\r\n            form.find('.background-image-previewer').attr('src', imageUrl !== 'none' && imageUrl !== '' ? imageUrl : '/static/images/photo_holder.png');\r\n    \r\n            form.find('.select-bg-repeat').val(target.style.backgroundRepeat || 'repeat');\r\n            form.find('.select-bg-position').val(target.style.backgroundPosition || '0% 0%');\r\n            form.find('.select-bg-size').val(target.style.backgroundSize || 'auto');\r\n    \r\n            var colorPicker = form.find('.color-picker');\r\n            colorPicker.colorpicker('setValue', target.style.backgroundColor || 'transparent');\r\n            \r\n            form.find('.txt-padding').each(function () {\r\n                var txt = $(this);\r\n                var styleName = txt.attr('data-style-name');\r\n        \r\n                txt.val((target.style[styleName] || '').replace('px', ''));\r\n            });\r\n            form.find('.txt-margin').each(function () {\r\n                var txt = $(this);\r\n                var styleName = txt.attr('data-style-name');\r\n        \r\n                txt.val((target.style[styleName] || '').replace('px', ''));\r\n            });\r\n    \r\n            form.find('.txt-height').val((target.style.height || '').replace('px', ''));\r\n            form.find('.txt-max-height').val((target.style.maxHeight || '').replace('px', ''));\r\n            form.find('.txt-width').val((target.style.width || '').replace('px', ''));\r\n            form.find('.txt-maxWith').val((target.style.maxWidth || '').replace('px', ''));\r\n        }\r\n    };\r\n    \r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Video Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['video'] = {\r\n        init: function (contentArea, container, component, keditor) {\r\n            flog('init \"video\" component', component);\r\n\r\n            var self = this;\r\n\r\n            var img = component.find('img[data-video-src]');\r\n            img.attr('id', keditor.generateId('component-video'));\r\n\r\n            var wrapper = img.parent();\r\n            if (!wrapper.hasClass('video-wrapper')) {\r\n                img.wrap('<div class=\"video-wrapper\"></div>');\r\n                wrapper = img.parent();\r\n            }\r\n\r\n            wrapper.attr('data-id', img.attr('id'));\r\n            wrapper.attr('data-autostart', img.attr('data-autostart'));\r\n            wrapper.attr('data-aspectratio', img.attr('data-aspectratio'));\r\n            wrapper.attr('data-video-src', img.attr('data-video-src'));\r\n            wrapper.attr('data-repeat', img.attr('data-repeat'));\r\n            wrapper.attr('data-controls', img.attr('data-controls'));\r\n\r\n            $.getScriptOnce('/static/jwplayer/6.10/jwplayer.js', function () {\r\n                jwplayer.key = 'cXefLoB9RQlBo/XvVncatU90OaeJMXMOY/lamKrzOi0=';\r\n                self.buildJWVideoPlayerPreview(component);\r\n            });\r\n        },\r\n\r\n        getContent: function (component) {\r\n            flog('getContent \"video\" component, component');\r\n\r\n            var wrapper = component.find('.video-wrapper');\r\n            var html = '<img class=\"video-jw\" ';\r\n            html += '       id=\"' + this.componentId + '\" ';\r\n            html += '       src=\"' + wrapper.attr('data-video-src') + '/alt-640-360.png\" ';\r\n            html += '       data-autostart=\"' + wrapper.attr('data-autostart') + '\" ';\r\n            html += '       data-aspectratio=\"' + wrapper.attr('data-aspectratio') + '\" ';\r\n            html += '       data-video-src=\"' + wrapper.attr('data-video-src') + '\" ';\r\n            html += '       data-repeat=\"' + wrapper.attr('data-repeat') + '\" ';\r\n            html += '       data-controls=\"' + wrapper.attr('data-controls') + '\" />';\r\n            wrapper.html(html);\r\n\r\n            return component.find('.keditor-component-content').html();\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Video Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('init \"video\" settings', form);\r\n            var self = this;\r\n\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <div class=\"video-toolbar\">' +\r\n                '               <a href=\"#\" class=\"btn-videoFileInput btn btn-sm btn-primary btn-block\"><i class=\"fa fa-upload\"></i> Change your video</a>' +\r\n                '               <input id=\"videoFileInput\" type=\"file\" style=\"display: none\">' +\r\n                '           </div>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"video-autoplay\" class=\"col-sm-12\">Autoplay</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"video-autoplay\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"video-loop\" class=\"col-sm-12\">Repeat</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"video-loop\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"video-showcontrols\" class=\"col-sm-12\">Show Controls</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"video-showcontrols\" checked />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Ratio</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"radio\" name=\"video-radio\" class=\"video-ratio\" value=\"4:3\" checked /> 4:3' +\r\n                '       </div>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"radio\" name=\"video-radio\" class=\"video-ratio\" value=\"16:9\" /> 16:9' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Enable border</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" class=\"chk-border\" value=\"\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Border color</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <div class=\"input-group color-picker\">' +\r\n                '               <span class=\"input-group-addon\"><i></i></span>' +\r\n                '               <input type=\"text\" value=\"\" class=\"txt-border-color form-control\" disabled />' +\r\n                '           </div>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Border width</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"number\" class=\"border-width form-control\" disabled />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label for=\"\" class=\"col-sm-12\">Border style</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <select class=\"form-control select-border-style selectpicker\" disabled title=\" - Select Border Style - \">' +\r\n                '               <option data-content=\"<div class=border-style-solid></div>\" value=\"solid\">Solid</option>' +\r\n                '               <option data-content=\"<div class=border-style-dotted></div>\" value=\"dotted\">Dotted</option>' +\r\n                '               <option data-content=\"<div class=border-style-dashed></div>\" value=\"dashed\">Dased</option>' +\r\n                '               <option data-content=\"<div class=border-style-double></div>\" value=\"double\">Double</option>' +\r\n                '           </select>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n\r\n            var selectPicker = form.find('.select-border-style');\r\n            selectPicker.selectpicker().on('changed.bs.select', function () {\r\n                self.borderStyle = this.value;\r\n                keditor.getSettingComponent().find('.video-wrapper').css('border-style', this.value);\r\n            });\r\n\r\n            var txtBorderWidth = form.find('.border-width');\r\n            txtBorderWidth.on('change', function () {\r\n                var width = this.value;\r\n                if (isNaN(width) || width < 0) {\r\n                    width = 1;\r\n                    this.value = width;\r\n                }\r\n\r\n                self.borderWidth = width;\r\n                keditor.getSettingComponent().find('.video-wrapper').css('border-width', width);\r\n            });\r\n\r\n            var colorPicker = form.find('.color-picker');\r\n            var input = colorPicker.find('input');\r\n            var previewer = colorPicker.find('.input-group-addon i');\r\n            colorPicker.colorpicker({\r\n                format: 'hex',\r\n                container: colorPicker.parent(),\r\n                component: '.input-group-addon',\r\n                align: 'left',\r\n                colorSelectors: {\r\n                    'transparent': 'transparent'\r\n                }\r\n            }).on('changeColor.colorpicker', function (e) {\r\n                var colorHex = e.color.toHex();\r\n\r\n                if (!input.val() || input.val().trim().length === 0) {\r\n                    colorHex = '';\r\n                    previewer.css('background-color', '');\r\n                }\r\n\r\n                self.borderColor = colorHex;\r\n                keditor.getSettingComponent().find('.video-wrapper').css('border-color', colorHex);\r\n            });\r\n\r\n            form.find('.chk-border').on('click', function () {\r\n                selectPicker.prop('disabled', !this.checked).selectpicker('refresh');\r\n                txtBorderWidth.prop('disabled', !this.checked);\r\n                colorPicker.colorpicker(this.checked ? 'enable' : 'disable');\r\n\r\n                if (!this.checked) {\r\n                    keditor.getSettingComponent().find('.video-wrapper').css('border', '');\r\n                    selectPicker.selectpicker('val', '');\r\n                    txtBorderWidth.val('');\r\n                    colorPicker.colorpicker('setValue', 'transparent');\r\n                }\r\n            });\r\n\r\n            var btnVideoFileInput = form.find('.btn-videoFileInput');\r\n            btnVideoFileInput.mselect({\r\n                contentTypes: ['video'],\r\n                bs3Modal: true,\r\n                pagePath: window.location.pathname.replace('contenteditor', ''),\r\n                onSelectFile: function (url) {\r\n                    keditor.getSettingComponent().find('.video-wrapper').attr('data-video-src', url);\r\n                    self.refreshVideoPlayerPreview(keditor);\r\n                }\r\n            });\r\n\r\n            var autoplayToggle = form.find('#video-autoplay');\r\n            autoplayToggle.on('click', function () {\r\n                keditor.getSettingComponent().find('.video-wrapper').attr('data-autostart', this.checked);\r\n                self.buildJWVideoPlayerPreview(keditor);\r\n            });\r\n\r\n            var loopToggle = form.find('#video-loop');\r\n            loopToggle.on('click', function () {\r\n                keditor.getSettingComponent().find('.video-wrapper').attr('data-repeat', this.checked);\r\n                self.buildJWVideoPlayerPreview(keditor);\r\n            });\r\n\r\n            var ratio = form.find('.video-ratio');\r\n            ratio.on('click', function (e) {\r\n                if (this.checked) {\r\n                    keditor.getSettingComponent().find('.video-wrapper').attr('data-aspectratio', this.value);\r\n                    self.buildJWVideoPlayerPreview(keditor);\r\n                }\r\n            });\r\n\r\n            var showcontrolsToggle = form.find('#video-showcontrols');\r\n            showcontrolsToggle.on('click', function (e) {\r\n                keditor.getSettingComponent().find('.video-wrapper').attr('data-controls', this.checked);\r\n                self.buildJWVideoPlayerPreview(keditor);\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"video\" component', form, component);\r\n\r\n            var wrapper = component.find('.video-wrapper');\r\n            var borderWidth = wrapper.css('border-width') || '';\r\n            var isBorderEnabled = borderWidth !== '0px';\r\n\r\n            var chkBorder = form.find('.chk-border');\r\n            var txtBorderWidth = form.find('.border-width');\r\n            var colorPicker = form.find('.color-picker');\r\n            var selectPicker = form.find('.select-border-style');\r\n\r\n            chkBorder.prop('checked', isBorderEnabled);\r\n            selectPicker.prop('disabled', !isBorderEnabled).selectpicker('refresh').selectpicker('val', wrapper.css('border-style'));\r\n            txtBorderWidth.prop('disabled', !isBorderEnabled).val(isBorderEnabled ? borderWidth.replace('px', '') : '');\r\n            colorPicker.colorpicker(isBorderEnabled ? 'enable' : 'disable').colorpicker('setValue', isBorderEnabled ? wrapper.css('border-color') : '');\r\n\r\n            form.find('#video-autoplay').prop('checked', wrapper.attr('data-autostart') === 'true');\r\n            form.find('#video-loop').prop('checked', wrapper.attr('data-repeat') === 'true');\r\n            form.find('.video-ratio').filter('[value=\"' + wrapper.attr('data-aspectratio') + '\"]').prop('checked', true);\r\n            form.find('#video-showcontrols').prop('checked', wrapper.attr('data-controls') === 'true');\r\n        },\r\n\r\n        buildJWVideoPlayerPreview: function (component) {\r\n            if (!component.jquery) {\r\n                component = component.getSettingComponent();\r\n            }\r\n            var wrapper = component.find('.video-wrapper');\r\n            var src = wrapper.attr('data-video-src');\r\n            var autostart = wrapper.attr('data-autostart');\r\n            var repeat = wrapper.attr('data-repeat');\r\n            var aspectratio = wrapper.attr('data-aspectratio');\r\n            var controls = wrapper.attr('data-controls');\r\n            var playerInstance = jwplayer(wrapper.attr('data-id'));\r\n            var posterHref = src + '/alt-640-360.png';\r\n\r\n            flog(\"buildJWPlayer\", src, \"aspectratio=\", aspectratio);\r\n            playerInstance.setup({\r\n                autostart: autostart,\r\n                repeat: repeat,\r\n                controls: controls,\r\n                aspectratio: aspectratio,\r\n                flashplayer: \"/static/jwplayer/6.10/jwplayer.flash.swf\",\r\n                html5player: \"/static/jwplayer/6.10/jwplayer.html5.js\",\r\n                width: \"100%\",\r\n                androidhls: true, //enable hls on android 4.1+\r\n                playlist: [{\r\n                    image: posterHref,\r\n                    sources: [{\r\n                        file: src\r\n                    }\r\n                        , {\r\n                            file: src + \"/../alt-640-360.webm\"\r\n                        }, {\r\n                            file: src + \"/../alt-640-360.m4v\"\r\n                        }]\r\n                }]\r\n                , primary: \"flash\"\r\n            });\r\n\r\n            playerInstance.onReady(function () {\r\n                flog('jwplayer preview init done');\r\n            });\r\n        },\r\n\r\n        refreshVideoPlayerPreview: function (keditor) {\r\n            var wrapper = keditor.getSettingComponent().find('.video-wrapper');\r\n            var playerInstance = jwplayer(wrapper.attr('data-id'));\r\n            var src = wrapper.attr('data-video-src');\r\n\r\n            playerInstance.load([{\r\n                file: src\r\n            }]);\r\n            playerInstance.play();\r\n        }\r\n    };\r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Vimeo Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['vimeo'] = {\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"vimeo\" component', component);\r\n\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.vimeo-cover').remove();\r\n\r\n            return componentContent.html();\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Vimeo Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"vimeo\" component');\r\n\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <button type=\"button\" class=\"btn btn-block btn-primary btn-vimeo-edit\">Change Video</button>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Autoplay</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"vimeo-autoplay\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Aspect Ratio</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <button type=\"button\" class=\"btn btn-sm btn-default btn-vimeo-169\">16:9</button>' +\r\n                '           <button type=\"button\" class=\"btn btn-sm btn-default btn-vimeo-43\">4:3</button>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n\r\n            var btnEdit = form.find('.btn-vimeo-edit');\r\n            btnEdit.on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                var inputData = prompt('Please enter Vimeo URL in here:');\r\n                var vimeoRegex = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\r\n                var match = inputData.match(vimeoRegex);\r\n                if (match && match[1]) {\r\n                    keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://player.vimeo.com/video/' + match[1] + '?byline=0&portrait=0&badge=0');\r\n                } else {\r\n                    alert('Your Vimeo URL is invalid!');\r\n                }\r\n            });\r\n\r\n            var btn169 = form.find('.btn-vimeo-169');\r\n            btn169.on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n            });\r\n\r\n            var btn43 = form.find('.btn-vimeo-43');\r\n            btn43.on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n            });\r\n\r\n            var chkAutoplay = form.find('#vimeo-autoplay');\r\n            chkAutoplay.on('click', function () {\r\n                var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\r\n                var currentUrl = embedItem.attr('src');\r\n                var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?byline=0&portrait=0&badge=0&autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\r\n\r\n                flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\r\n                embedItem.attr('src', newUrl);\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"vimeo\" component', component);\r\n\r\n            var embedItem = component.find('.embed-responsive-item');\r\n            var chkAutoplay = form.find('#vimeo-autoplay');\r\n            var src = embedItem.attr('src');\r\n\r\n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n\r\n/**\r\n * KEditor Youtube Component\r\n * @copyright: Kademi (http://kademi.co)\r\n * @author: Kademi (http://kademi.co)\r\n * @version: @{version}\r\n * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap, FontAwesome (optional)\r\n */\r\n(function ($) {\r\n    var KEditor = $.keditor;\r\n    var flog = KEditor.log;\r\n\r\n    KEditor.components['youtube'] = {\r\n        getContent: function (component, keditor) {\r\n            flog('getContent \"youtube\" component', component);\r\n\r\n            var componentContent = component.children('.keditor-component-content');\r\n            componentContent.find('.youtube-cover').remove();\r\n\r\n            return componentContent.html();\r\n        },\r\n\r\n        settingEnabled: true,\r\n\r\n        settingTitle: 'Youtube Settings',\r\n\r\n        initSettingForm: function (form, keditor) {\r\n            flog('initSettingForm \"youtube\" component');\r\n\r\n            form.append(\r\n                '<form class=\"form-horizontal\">' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <button type=\"button\" class=\"btn btn-block btn-primary btn-youtube-edit\">Change Video</button>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Autoplay</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <input type=\"checkbox\" id=\"youtube-autoplay\" />' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '   <div class=\"form-group\">' +\r\n                '       <label class=\"col-sm-12\">Aspect Ratio</label>' +\r\n                '       <div class=\"col-sm-12\">' +\r\n                '           <button type=\"button\" class=\"btn btn-sm btn-default btn-youtube-169\">16:9</button>' +\r\n                '           <button type=\"button\" class=\"btn btn-sm btn-default btn-youtube-43\">4:3</button>' +\r\n                '       </div>' +\r\n                '   </div>' +\r\n                '</form>'\r\n            );\r\n\r\n            var btnEdit = form.find('.btn-youtube-edit');\r\n            btnEdit.on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                var inputData = prompt('Please enter Youtube URL in here:');\r\n                var youtubeRegex = /^(?:http(?:s)?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:(?:watch)?\\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\\/))([^\\?&\\\"'>]+)/;\r\n                var match = inputData.match(youtubeRegex);\r\n                if (match && match[1]) {\r\n                    keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://www.youtube.com/embed/' + match[1]);\r\n                } else {\r\n                    alert('Your Youtube URL is invalid!');\r\n                }\r\n            });\r\n\r\n            var btn169 = form.find('.btn-youtube-169');\r\n            btn169.on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\r\n            });\r\n\r\n            var btn43 = form.find('.btn-youtube-43');\r\n            btn43.on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\r\n            });\r\n\r\n            var chkAutoplay = form.find('#youtube-autoplay');\r\n            chkAutoplay.on('click', function () {\r\n                var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\r\n                var currentUrl = embedItem.attr('src');\r\n                var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\r\n\r\n                flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\r\n                embedItem.attr('src', newUrl);\r\n            });\r\n        },\r\n\r\n        showSettingForm: function (form, component, keditor) {\r\n            flog('showSettingForm \"youtube\" component', component);\r\n\r\n            var embedItem = component.find('.embed-responsive-item');\r\n            var chkAutoplay = form.find('#youtube-autoplay');\r\n            var src = embedItem.attr('src');\r\n\r\n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\r\n        }\r\n    };\r\n\r\n})(jQuery);\r\n"]}