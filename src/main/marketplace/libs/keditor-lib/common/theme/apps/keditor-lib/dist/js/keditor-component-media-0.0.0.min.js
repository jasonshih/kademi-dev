/**!
 * KEditor - Kademi content editor
 * @copyright: Kademi (http://kademi.co)
 * @author: Kademi (http://kademi.co)
 * @version: 0.0.0
 * @dependencies: $, $.fn.draggable, $.fn.droppable, $.fn.sortable, Bootstrap (optional), FontAwesome (optional)
 */
!function(t){var n=t.keditor,e=n.log;n.components.media={init:function(t,n,i,o){e('init "media" component',i);var a=o.options,d=i.children(".keditor-component-content"),r=d.find(".media-body");r.addClass("clearfix");var l=d.find(".media-left"),c=d.find(".media-left-inner");0===c.length&&l.html('<div class="media-left-inner">'+l.html()+"</div>"),r.attr("id")||r.attr("id",o.generateId("component-text-content-inner")),r.prop("contenteditable",!0),r.on("input",function(e){"function"==typeof a.onComponentChanged&&a.onComponentChanged.call(t,e,i),"function"==typeof a.onContainerChanged&&a.onContainerChanged.call(t,e,n),"function"==typeof a.onContentChanged&&a.onContentChanged.call(t,e)});var s=r.ckeditor(a.ckeditorOptions).editor;s.on("instanceReady",function(){e("CKEditor is ready",i),"function"==typeof a.onComponentReady&&a.onComponentReady.call(t,i,s)})},getContent:function(t,n){e('getContent "media" component',t);var i=t.find(".keditor-component-content"),o=i.find(".media-body"),a=o.attr("id"),d=CKEDITOR.instances[a];return d&&o.replaceWith('<div class="media-body clearfix">'+d.getData()+"</div>"),i.html()},destroy:function(t,n){e('destroy "text" component',t);var i=t.find(".media-body").attr("id"),o=CKEDITOR.instances[i];o&&o.destroy()},settingEnabled:!0,settingTitle:"Media Settings",initSettingForm:function(n,i){return e('initSettingForm "media" component'),t.ajax({url:"/theme/apps/keditor-lib/componentMediaSettings.html",type:"get",dataType:"HTML",success:function(t){n.html(t);var e=n.find(".photo-link");e.on("change",function(){var t=this.value.trim();i.getSettingComponent().find("a").attr("href",t)});var o=n.find(".photo-target");o.on("change",function(){i.getSettingComponent().find("a").attr("target",this.value)});var a=n.find(".photo-linkable");a.on("click",function(){var t=i.getSettingComponent().find("img.media-object");a.is(":checked")?(e.prop("disabled",!1),o.prop("disabled",!1),t.wrap('<a href=""></a>')):(e.prop("disabled",!0),o.prop("disabled",!0),t.unwrap("a"))}),n.find(".photo-v-align").on("change",function(){var t=i.getSettingComponent().find(".media-left");t.css("vertical-align",this.value)}),n.find(".photo-responsive").on("click",function(){i.getSettingComponent().find("img")[this.checked?"addClass":"removeClass"]("img-responsive")}),n.find(".photo-style").on("change",function(){var t=i.getSettingComponent().find("img.media-object"),n=this.value;t.removeClass("img-rounded img-circle img-thumbnail"),n&&t.addClass(n)}),n.find(".photo-width").on("change",function(){var t=i.getSettingComponent().find("img.media-object");t.attr("width",this.value)});var d=n.find(".photo-edit");d.mselect({contentTypes:["image"],bs3Modal:!0,pagePath:i.options.pagePath,basePath:i.options.basePath,onSelectFile:function(t,n,e,o){var a=i.getSettingComponent().find("img.media-object");a.attr("src","/_hashes/files/"+o)}}),n.find(".left-width").on("change",function(){var t=i.getSettingComponent().find(".media-left-inner");t.css("width",this.value)})}})},showSettingForm:function(t,n,i){e('showSettingForm "media" component',n);var o=t.find(".photo-v-align"),a=t.find(".photo-responsive"),d=t.find(".photo-width"),r=t.find(".photo-style"),l=t.find(".photo-link"),c=t.find(".photo-target"),s=t.find(".photo-linkable"),p=n.find("img.media-object"),m=n.find(".media-left"),f=n.find(".media-left-inner");t.find(".left-width").val((f.get(0).style.width||"").replace("px",""));var g=p.parent("a");g.length>0?(s.prop("checked",!0),l.prop("disabled",!1).val(g.attr("href")),c.prop("disabled",!1).val(g.attr("target"))):(s.prop("checked",!1),l.prop("disabled",!0).val(""),c.prop("disabled",!0).val(""));var h=m.css("vertical-align")||"top";p.hasClass("img-rounded")?r.val("img-rounded"):p.hasClass("img-circle")?r.val("img-circle"):p.hasClass("img-thumbnail")?r.val("img-thumbnail"):r.val(""),o.val(h),a.prop("checked",p.hasClass("img-responsive")),d.val(p.attr("width"))}}}(jQuery);
//# sourceMappingURL=keditor-component-media-0.0.0.min.js.map
